<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Handgun Comparison</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2em;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .category-header {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            padding: 15px 25px;
            margin: 30px 0 20px 0;
            border-radius: 8px;
            font-size: 1.4em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border: 2px solid #ecf0f1;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-color: #3498db;
        }

        .model-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
            border-bottom: 2px solid #ecf0f1;
            padding-bottom: 10px;
        }

        .gun-image {
            width: 100%;
            max-width: 280px;
            height: 140px;
            object-fit: contain;
            display: block;
            margin: 15px auto 20px auto;
            border-radius: 8px;
            background: #ffffff;
            padding: 10px;
            border: 2px solid #dee2e6;
        }

        .spec-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        .spec-item {
            display: flex;
            flex-direction: column;
        }

        .spec-label {
            font-size: 0.85em;
            color: #7f8c8d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 3px;
        }

        .spec-value {
            font-size: 1em;
            color: #2c3e50;
            font-weight: 500;
        }

        .capacity-score {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            text-align: center;
            font-weight: bold;
            margin: 10px 0;
            font-size: 0.9em;
        }

        .price,
        .mods-price {
            color: white;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 1.1em;
            margin-top: 15px;
        }

        .price {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
        }

        .mods-price {
            background: linear-gradient(135deg, #2980b9, #3498db);
        }

        .features,
        .mods {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .features {
            border-left: 4px solid #3498db;
        }

        .mods {
            border-left: 4px solid #27ae60;
        }

        .features-label,
        .mods-label {
            font-size: 0.85em;
            color: #7f8c8d;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 5px;
        }

        .features-text,
        .mods-text {
            font-size: 0.9em;
            color: #2c3e50;
            line-height: 1.4;
        }

        .legend {
            background: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin-top: 30px;
            border-left: 4px solid #3498db;
        }

        .legend h3 {
            margin-top: 0;
            color: #2c3e50;
        }

        .controls-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .control-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 15px;
            align-items: center;
        }

        .control-row:last-child {
            margin-bottom: 0;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 150px;
        }

        .control-group label {
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }

        .control-group select,
        .control-group input[type="range"] {
            padding: 8px 12px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 0.9em;
        }

        .control-group select:focus,
        .control-group input:focus {
            outline: none;
            border-color: #3498db;
        }

        .control-group button {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(231, 76, 60, 0.3);
        }

        .control-group span {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9em;
        }

        .best-picks {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            color: white;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .best-picks h3 {
            margin-top: 0;
            margin-bottom: 15px;
        }

        .best-picks ul {
            margin: 0;
            padding-left: 20px;
        }

        .best-picks li {
            margin-bottom: 8px;
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .grid {
                grid-template-columns: 1fr;
            }

            .control-row {
                flex-direction: column;
                align-items: stretch;
            }

            .control-group {
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Micro & Compact Handgun Comparison</h1>
        <p class="subtitle">A detailed comparison of popular micro-compact, subcompact, and compact handguns.</p>

        <div class="controls-section">
            <div class="control-row">
                <div class="control-group">
                    <label for="categoryFilter">Filter by Category:</label>
                    <select id="categoryFilter" name="categoryFilter">
                        <option value="all">All Categories</option>
                        <option value="micro">Micro Compact</option>
                        <option value="compact">Compact</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="sortBy">Sort by:</label>
                    <select id="sortBy" name="sortBy">
                        <option value="name">Name</option>
                        <option value="price">MSRP</option>
                        <option value="price_mods">MSRP + Mods</option>
                        <option value="length">Length</option>
                        <option value="height">Height</option>
                        <option value="width">Width</option>
                        <option value="weight">Weight</option>
                        <option value="barrel">Barrel</option>
                        <option value="capacity">Capacity</option>
                        <option value="ratio">Weight/Capacity Ratio</option>
                        <option value="volume">Volume</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="sortOrder">Order:</label>
                    <select id="sortOrder" name="sortOrder">
                        <option value="asc">Ascending</option>
                        <option value="desc">Descending</option>
                    </select>
                </div>
                <div class="control-group">
                    <button id="resetFilters">Reset</button>
                </div>
            </div>
            <div class="control-row">
                <div class="control-group">
                    <label for="priceFilter">Max Price: <span id="priceValue">$3000</span></label>
                    <input type="range" id="priceFilter" name="priceFilter" min="300" max="3000" value="3000" step="10">
                </div>
                <div class="control-group">
                    <label for="capacityFilter">Min Capacity: <span id="capacityValue">10</span></label>
                    <input type="range" id="capacityFilter" name="capacityFilter" min="5" max="20" value="10" step="1">
                </div>
            </div>
        </div>

        <div id="gun-grid"></div>

    </div>

    <script>
        const gunData = [{
            category: 'micro',
            name: 'Smith & Wesson® Shield Plus',
            shortName: 'S&W® Shield Plus',
            image: 'images/smith-wesson-shield-plus.png',
            length: 6.1,
            height: 4.6,
            width: 1.1,
            weight: 20.2,
            barrel: 3.1,
            capacity: 13,
            capacityText: '10/13',
            ratio: 1.55,
            ratioText: '1.84 / 1.55',
            price: 499,
            features: 'Optics-ready, flat-face trigger',
            mods: 'Magazine/Grip Extension (MagGuts)',
            modsPrice: 33
        },
        {
            category: 'micro',
            name: 'Springfield Armory® Hellcat',
            shortName: 'SA® Hellcat',
            image: 'images/springfield-hellcat.jpg',
            length: 6,
            height: 4,
            width: 1,
            weight: 18.3,
            barrel: 3.0,
            capacity: 13,
            capacityText: '11/13',
            ratio: 1.38,
            ratioText: '1.63 / 1.38',
            price: 599,
            features: 'Optics-ready, high-capacity, adaptive grip texture',
            mods: 'Apex Trigger Kit',
            modsPrice: 80
        },
        {
            category: 'micro',
            name: 'Glock 43X®',
            shortName: 'Glock 43X®',
            image: 'images/glock_43x_1_1-1656600106.png',
            length: 6.5,
            height: 5.04,
            width: 1.1,
            weight: 18.7,
            barrel: 3.4,
            capacity: 10,
            capacityText: '10',
            ratio: 1.87,
            ratioText: '1.87',
            price: 485,
            features: 'Slimline design, reversible magazine catch',
            mods: 'Apex Trigger & Night Sights',
            modsPrice: 240
        },
        {
            category: 'micro',
            name: 'Taurus GX4®',
            shortName: 'Taurus GX4®',
            image: 'images/taurus-gx4.jpg',
            length: 5.8,
            height: 4.4,
            width: 1.08,
            weight: 18.5,
            barrel: 3.06,
            capacity: 11,
            capacityText: '11',
            ratio: 1.69,
            ratioText: '1.83 / 1.69',
            price: 394,
            features: 'Optics-ready, tritium front sight',
            mods: 'Grip Extension',
            modsPrice: 10
        },
        {
            category: 'micro',
            name: 'Canik Mete MC9®',
            shortName: 'Canik MC9®',
            image: 'images/canik-mete-mc9.jpg',
            length: 6.1,
            height: 4.52,
            width: 1.12,
            weight: 21.2,
            barrel: 3.18,
            capacity: 15,
            capacityText: '12/15',
            ratio: 1.41,
            ratioText: '1.76 / 1.41',
            price: 439,
            features: 'Optics-ready, co-witness sights',
            mods: 'Short-Stroke Trigger Kit',
            modsPrice: 55
        },
        {
            category: 'micro',
            name: 'FN Reflex®',
            shortName: 'FN Reflex®',
            image: 'images/FN-Reflex-BLK-RIGHT-12rd-Extention-2740146837.png',
            length: 6.2,
            height: 4.29,
            width: 1.0,
            weight: 18.4,
            barrel: 3.3,
            capacity: 15,
            capacityText: '11/15',
            ratio: 1.23,
            ratioText: '1.67 / 1.23',
            price: 599,
            features: 'Internal hammer, optics-ready, thin profile',
            mods: '15-Round Extended Magazine',
            modsPrice: 45
        },
        {
            category: 'micro',
            name: 'Ruger MAX-9®',
            shortName: 'Ruger MAX-9®',
            image: 'images/ruger-max-9.jpg',
            length: 6,
            height: 4.52,
            width: 0.95,
            weight: 18.4,
            barrel: 3.2,
            capacity: 12,
            capacityText: '10/12',
            ratio: 1.53,
            ratioText: '1.83 / 1.53',
            price: 439,
            features: 'Optics-ready, tritium front sight',
            mods: 'Short-Stroke Trigger Kit',
            modsPrice: 80
        },
        {
            category: 'micro',
            name: 'Glock G26 Gen5®',
            shortName: 'Glock 26®',
            image: 'images/glock_26_gen5_1-2453897421.png',
            length: 6.42,
            height: 4.17,
            width: 1.30,
            weight: 21.69,
            barrel: 3.43,
            capacity: 10,
            capacityText: '10',
            ratio: 1.97,
            ratioText: '1.97',
            price: 600,
            features: 'Subcompact "Baby Glock", Gen5 features, highly concealable',
            mods: 'Apex Trigger & Night Sights',
            modsPrice: 240
        },
        {
            category: 'micro',
            name: 'Shadow Systems® CR920',
            shortName: 'SS® CR920',
            image: 'images/shadowsystems-shadowsystemscr920-ss4077__30474.1705092534-1008838816.png',
            length: 6.6,
            height: 4.9,
            width: 1.06,
            weight: 22,
            barrel: 3.5,
            capacity: 16,
            capacityText: '15',
            ratio: 1.38,
            ratioText: '1.38',
            price: 699,
            features: 'Enhanced Glock platform, improved features',
            mods: 'Streamlight TLR-7 Sub Weapon Light',
            modsPrice: 140
        },
        {
            category: 'micro',
            name: 'IWI Masada Slim®',
            shortName: 'IWI Masada®',
            image: 'images/iwi_massada_slim.png',
            length: 5.9,
            height: 4.5,
            width: 1.1,
            weight: 19.3,
            barrel: 3.4,
            capacity: 13,
            capacityText: '13',
            ratio: 1.46,
            ratioText: '1.46',
            price: 450,
            features: 'Modular trigger group, clean trigger pull',
            mods: 'Talon Grip Overlays',
            modsPrice: 20
        },
        {
            category: 'micro',
            name: 'H&K VP9SK®',
            shortName: 'HK VP9SK®',
            image: 'images/hk-vp9sk.jpg',
            length: 6.61,
            height: 4.57,
            width: 1.31,
            weight: 23.07,
            barrel: 3.39,
            capacity: 15,
            capacityText: '12/15',
            ratio: 1.57,
            ratioText: '1.83 / 1.57',
            price: 849,
            features: 'Optics-ready, ambidextrous controls',
            mods: 'Magazine Pinky Extension',
            modsPrice: 40
        },
        {
            category: 'micro',
            name: 'Beretta APX A1 Compact®',
            shortName: 'APX A1 C®',
            image: 'images/beretta-apx-a1-compact.jpg',
            length: 6.9,
            height: 4.8,
            width: 1.22,
            weight: 27.7,
            barrel: 3.7,
            capacity: 15,
            capacityText: '15',
            ratio: 1.85,
            ratioText: '1.85',
            price: 449,
            features: 'Modular chassis, aggressive slide serrations',
            mods: 'Performance Trigger Kit',
            modsPrice: 160
        },
        {
            category: 'compact',
            name: 'Glock 19®',
            shortName: 'Glock 19®',
            image: 'images/glock_19_g5_mos_1-1532078012.png',
            length: 7.28,
            height: 5.04,
            width: 1.34,
            weight: 23.63,
            barrel: 4.02,
            capacity: 15,
            capacityText: '15',
            ratio: 1.58,
            ratioText: '1.58',
            price: 540,
            features: 'Iconic reliability, flared mag-well, nDLC finish',
            mods: 'Apex Trigger & Night Sights',
            modsPrice: 240
        },
        {
            category: 'compact',
            name: 'Glock G45®',
            shortName: 'Glock 45®',
            image: 'images/g45.png',
            length: 7.44,
            height: 5.47,
            width: 1.34,
            weight: 24.48,
            barrel: 4.02,
            capacity: 17,
            capacityText: '17',
            ratio: 1.36,
            ratioText: '1.36',
            price: 620,
            features: 'Crossover design (G19 slide, G17 frame), front serrations',
            mods: 'Apex Trigger & Night Sights',
            modsPrice: 240
        },
        {
            category: 'compact',
            name: 'Walther PDP Compact®',
            shortName: 'PDP Compact®',
            image: 'images/walther-pdp-compact.png',
            length: 7.5,
            height: 5.4,
            width: 1.34,
            weight: 24.6,
            barrel: 4,
            capacity: 15,
            capacityText: '15',
            ratio: 1.64,
            ratioText: '1.64',
            price: 699,
            features: 'Superb trigger, excellent ergonomics, optics-ready',
            mods: 'Apex Trigger Kit',
            modsPrice: 135
        },
        {
            category: 'compact',
            name: 'CZ P-10 C®',
            shortName: 'P-10 C®',
            image: 'images/cz-p10-c.png',
            length: 7.3,
            height: 5.2,
            width: 1.26,
            weight: 26,
            barrel: 4.02,
            capacity: 15,
            capacityText: '15',
            ratio: 1.73,
            ratioText: '1.73',
            price: 449,
            features: 'Great trigger, comfortable ergonomics',
            mods: 'HBI Theta Trigger Kit',
            modsPrice: 65
        },
        {
            category: 'compact',
            name: 'Smith & Wesson® M&P 2.0 Compact',
            shortName: 'S&W® M&P 2.0 C',
            image: 'images/14032-OnWhite-Left__89241.1700246332.1280.1280-3632076607.png',
            length: 7.25,
            height: 5,
            width: 1.16,
            weight: 25.9,
            barrel: 4,
            capacity: 15,
            capacityText: '15',
            ratio: 1.73,
            ratioText: '1.73',
            price: 579,
            features: 'Aggressive texturing, reliable, good value',
            mods: 'Apex Trigger Kit',
            modsPrice: 170
        },
        {
            category: 'compact',
            name: 'Shadow Systems® MR920',
            shortName: 'SS® MR920',
            image: 'images/3-mr920-elite-B-nooptic-1536x1081-1188812622.png',
            length: 7.13,
            height: 4.75,
            width: 1.2,
            weight: 21.5,
            barrel: 4.0,
            capacity: 15,
            capacityText: '15',
            ratio: 1.43,
            ratioText: '1.43',
            price: 960,
            features: 'G19 compatible, enhanced ergonomics, advanced optic mounting system',
            mods: 'Thread-on Compensator',
            modsPrice: 95
        },
        {
            category: 'compact',
            name: 'Staccato CS®',
            shortName: 'Staccato CS®',
            image: 'images/Staccato_CS__64856.1709590327-2825765876.png',
            length: 7.1,
            height: 5.6,
            width: 1.2,
            weight: 22.7,
            barrel: 3.5,
            capacity: 16,
            capacityText: '16',
            ratio: 1.33,
            ratioText: '1.33',
            price: 2499,
            features: '2011 platform, exceptional trigger, premium build quality',
            mods: 'Surefire X300 Weapon Light',
            modsPrice: 320
        },
        {
            category: 'compact',
            name: 'Staccato P 4.4"®',
            shortName: 'Staccato P®',
            image: 'images/staccato_hd_p4.png',
            length: 8.0,
            height: 5.8,
            width: 1.3,
            weight: 28.0,
            barrel: 4.4,
            capacity: 17,
            capacityText: '17',
            ratio: 1.6,
            ratioText: '1.6',
            price: 2499,
            features: 'Competition-ready, smooth action, durable build',
            mods: 'Surefire X300 Weapon Light',
            modsPrice: 320
        }
        ];

        let filteredData = [...gunData];
        let filterCategory = 'all';

        const grid = document.getElementById('gun-grid');
        const priceFilter = document.getElementById('priceFilter');
        const priceValue = document.getElementById('priceValue');
        const capacityFilter = document.getElementById('capacityFilter');
        const capacityValue = document.getElementById('capacityValue');

        document.getElementById('categoryFilter').addEventListener('change', filterData);
        document.getElementById('sortBy').addEventListener('change', () => sortData(false));
        document.getElementById('sortOrder').addEventListener('change', () => sortData(false));
        document.getElementById('resetFilters').addEventListener('click', resetFilters);

        function sortData(isInitialLoad = false) {
            const sortBy = document.getElementById('sortBy').value;
            const sortOrder = document.getElementById('sortOrder').value;

            const specialSortOrder = (gun) => {
                if (filterCategory === 'micro') {
                    const name = gun.name.toLowerCase();
                    if (name.includes('canik') || name.includes('fn reflex')) {
                        return 1; // Sort these last
                    }
                }
                return 0; // Keep original order for others
            };

            const sortedData = filteredData.sort((a, b) => {
                if (isInitialLoad) {
                    const specialA = specialSortOrder(a);
                    const specialB = specialSortOrder(b);
                    if (specialA !== specialB) {
                        return specialA - specialB;
                    }
                }

                let valA, valB;
                switch (sortBy) {
                    case 'price':
                    case 'length':
                    case 'height':
                    case 'width':
                    case 'weight':
                    case 'barrel':
                    case 'capacity':
                    case 'ratio':
                        valA = a[sortBy];
                        valB = b[sortBy];
                        break;
                    case 'price_mods':
                        valA = a.price + a.modsPrice;
                        valB = b.price + b.modsPrice;
                        break;
                    case 'volume':
                        valA = a.length * a.height * a.width;
                        valB = b.length * b.height * b.width;
                        break;
                    case 'name':
                        valA = a.name;
                        valB = b.name;
                        break;
                }

                if (typeof valA === 'string') {
                    return sortOrder === 'asc' ? valA.localeCompare(valB) : valB.localeCompare(valA);
                } else {
                    return sortOrder === 'asc' ? valA - valB : valB - valA;
                }
            });

            displayData(sortedData);
        }

        function displayData(data) {
            grid.innerHTML = '';
            const categories = {};

            data.forEach(gun => {
                if (!categories[gun.category]) {
                    categories[gun.category] = [];
                }
                categories[gun.category].push(gun);
            });

            const categoryOrder = ['micro', 'compact'];

            for (const category of categoryOrder) {
                if (categories[category] && categories[category].length > 0) {
                    const categoryHeader = document.createElement('h2');
                    categoryHeader.className = 'category-header';
                    categoryHeader.textContent = `${category.charAt(0).toUpperCase() + category.slice(1)} Handguns`;
                    grid.appendChild(categoryHeader);

                    const categoryGrid = document.createElement('div');
                    categoryGrid.className = 'grid';

                    categories[category].forEach(gun => {
                        const volume = (gun.length * gun.height * gun.width).toFixed(2);
                        const card = document.createElement('div');
                        card.className = 'card';
                        card.innerHTML = `
                            <div class="model-name">${gun.shortName}</div>
                            <img src="${gun.image}" alt="${gun.name}" class="gun-image" onerror="this.onerror=null;this.src='images/placeholder.png';">
                            <div class="spec-grid">
                                <div class="spec-item">
                                    <div class="spec-label">L</div>
                                    <div class="spec-value">${gun.length}"</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">H</div>
                                    <div class="spec-value">${gun.height}"</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">W</div>
                                    <div class="spec-value">${gun.width}"</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Volume</div>
                                    <div class="spec-value">${volume} in³</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Weight</div>
                                    <div class="spec-value">${gun.weight} oz</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Barrel</div>
                                    <div class="spec-value">${gun.barrel}"</div>
                                </div>
                                <div class="spec-item">
                                    <div class="spec-label">Capacity</div>
                                    <div class="spec-value">${gun.capacityText}</div>
                                </div>
                                 <div class="spec-item">
                                    <div class="spec-label">Wt/Cap Ratio</div>
                                    <div class="spec-value">${gun.ratioText}</div>
                                </div>
                            </div>
                            <div class="price">MSRP: $${gun.price}</div>
                            <div class="mods-price">MSRP + Mods: $${gun.price + gun.modsPrice}</div>
                             <div class="mods">
                                <div class="mods-label">Common Mods</div>
                                <div class="mods-text">${gun.mods} (~$${gun.modsPrice})</div>
                            </div>
                            <div class="features">
                                <div class="features-label">Key Features</div>
                                <div class="features-text">${gun.features}</div>
                            </div>
                        `;
                        categoryGrid.appendChild(card);
                    });
                    grid.appendChild(categoryGrid);
                }
            }
        }

        function filterData() {
            const maxPrice = parseInt(priceFilter.value);
            const minCapacity = parseInt(capacityFilter.value);
            filterCategory = document.getElementById('categoryFilter').value;


            filteredData = gunData.filter(gun => {
                const categoryMatch = filterCategory === 'all' || gun.category === filterCategory;
                const priceMatch = gun.price <= maxPrice;
                const capacityMatch = gun.capacity >= minCapacity;
                return categoryMatch && priceMatch && capacityMatch;
            });

            sortData(false);
        }

        function updateSliderValues() {
            priceValue.textContent = `$${priceFilter.value}`;
            capacityValue.textContent = capacityFilter.value;
        }

        function resetFilters() {
            document.getElementById('categoryFilter').value = 'all';
            document.getElementById('sortBy').value = 'name';
            document.getElementById('sortOrder').value = 'asc';
            priceFilter.value = 3000;
            capacityFilter.value = 10;
            updateSliderValues();
            filteredData = [...gunData];
            sortData(true);
        }

        priceFilter.addEventListener('input', () => {
            updateSliderValues();
            filterData();
        });

        capacityFilter.addEventListener('input', () => {
            updateSliderValues();
            filterData();
        });


        document.addEventListener('DOMContentLoaded', () => {
            updateSliderValues();
            sortData(true);
        });
    </script>
    <div class="legend">
        <h3>Note on Sig Sauer®</h3>
        <p>Sig Sauer® models were intentionally excluded from this comparison for various reasons, including market
            positioning and feature sets that often place them in a slightly different category.</p>
        <h3>Legend</h3>
        <p><strong>L:</strong> Length | <strong>H:</strong> Height | <strong>W:</strong> Width |
            <strong>Volume:</strong> L &times; H &times; W | <strong>Wt/Cap Ratio:</strong> Weight-to-Capacity Ratio
        </p>
    </div>
    </div>

</body>

</html>